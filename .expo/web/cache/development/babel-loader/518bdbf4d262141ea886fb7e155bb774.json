{"ast":null,"code":"import _define_property from \"@swc/helpers/src/_define_property.mjs\";\nimport _object_spread from \"@swc/helpers/src/_object_spread.mjs\";\nimport _object_spread_props from \"@swc/helpers/src/_object_spread_props.mjs\";\nimport merge from \"lodash.merge\";\nvar SPECIFICITY_100 = 100;\nvar SPECIFICITY_70 = 70;\nvar SPECIFICITY_60 = 60;\nvar SPECIFICITY_55 = 55;\nvar SPECIFICITY_50 = 50;\nvar SPECIFICITY_40 = 40;\nvar SPECIFICITY_30 = 30;\nvar SPECIFICITY_10 = 10;\nvar SPECIFICITY_1 = 1;\nvar specificityPrecedence = [SPECIFICITY_100, SPECIFICITY_70, SPECIFICITY_60, SPECIFICITY_55, SPECIFICITY_50, SPECIFICITY_40, SPECIFICITY_30, SPECIFICITY_10, SPECIFICITY_1];\n\nvar _obj;\n\nvar INITIAL_PROP_SPECIFICITY = (_obj = {}, _define_property(_obj, SPECIFICITY_100, 0), _define_property(_obj, SPECIFICITY_70, 0), _define_property(_obj, SPECIFICITY_60, 0), _define_property(_obj, SPECIFICITY_50, 0), _define_property(_obj, SPECIFICITY_55, 0), _define_property(_obj, SPECIFICITY_40, 0), _define_property(_obj, SPECIFICITY_30, 0), _define_property(_obj, SPECIFICITY_10, 0), _define_property(_obj, SPECIFICITY_1, 0), _obj);\nvar pseudoPropsMap = {\n  _web: {\n    dependentOn: \"platform\",\n    priority: SPECIFICITY_10\n  },\n  _ios: {\n    dependentOn: \"platform\",\n    priority: SPECIFICITY_10\n  },\n  _android: {\n    dependentOn: \"platform\",\n    priority: SPECIFICITY_10\n  },\n  _light: {\n    dependentOn: \"colormode\",\n    priority: SPECIFICITY_10\n  },\n  _dark: {\n    dependentOn: \"colormode\",\n    priority: SPECIFICITY_10\n  },\n  _indeterminate: {\n    dependentOn: \"state\",\n    respondTo: \"isIndeterminate\",\n    priority: SPECIFICITY_30\n  },\n  _checked: {\n    dependentOn: \"state\",\n    respondTo: \"isChecked\",\n    priority: SPECIFICITY_30\n  },\n  _readOnly: {\n    dependentOn: \"state\",\n    respondTo: \"isReadOnly\",\n    priority: SPECIFICITY_30\n  },\n  _invalid: {\n    dependentOn: \"state\",\n    respondTo: \"isInvalid\",\n    priority: SPECIFICITY_40\n  },\n  _focus: {\n    dependentOn: \"state\",\n    respondTo: \"isFocused\",\n    priority: SPECIFICITY_50\n  },\n  _focusVisible: {\n    dependentOn: \"state\",\n    respondTo: \"isFocusVisible\",\n    priority: SPECIFICITY_55\n  },\n  _hover: {\n    dependentOn: \"state\",\n    respondTo: \"isHovered\",\n    priority: SPECIFICITY_60\n  },\n  _pressed: {\n    dependentOn: \"state\",\n    respondTo: \"isPressed\",\n    priority: SPECIFICITY_70\n  },\n  _disabled: {\n    dependentOn: \"state\",\n    respondTo: \"isDisabled\",\n    priority: SPECIFICITY_100\n  }\n};\nexport var compareSpecificity = function compareSpecificity(exisiting, upcoming, ignorebaseTheme) {\n  if (!exisiting) return true;\n  if (!upcoming) return false;\n  var condition = ignorebaseTheme ? specificityPrecedence.length - 1 : specificityPrecedence.length;\n\n  for (var index = 0; index < condition; index++) {\n    if (exisiting[specificityPrecedence[index]] > upcoming[specificityPrecedence[index]]) {\n      return false;\n    } else if (exisiting[specificityPrecedence[index]] < upcoming[specificityPrecedence[index]]) {\n      return true;\n    }\n  }\n\n  return true;\n};\n\nvar shouldResolvePseudoProp = function shouldResolvePseudoProp(param) {\n  var property = param.property,\n      state = param.state,\n      platform = param.platform,\n      colormode = param.colormode;\n\n  if (pseudoPropsMap[property].dependentOn === \"platform\") {\n    return property === \"_\".concat(platform);\n  } else if (pseudoPropsMap[property].dependentOn === \"colormode\") {\n    return property === \"_\".concat(colormode);\n  } else if (pseudoPropsMap[property].dependentOn === \"state\") {\n    return state[pseudoPropsMap[property].respondTo];\n  } else {\n    return false;\n  }\n};\n\nvar simplifyProps = function simplifyProps(param) {\n  var props = param.props,\n      colormode = param.colormode,\n      platform = param.platform,\n      state = param.state,\n      currentSpecificity = param.currentSpecificity,\n      previouslyFlattenProps = param.previouslyFlattenProps,\n      flattenProps = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {},\n      specificityMap = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {},\n      priority = arguments.length > 3 ? arguments[3] : void 0;\n\n  for (var property in props) {\n    var _pseudoPropsMap$prope, _pseudoPropsMap$prope2;\n\n    var propertySpecity = currentSpecificity ? _object_spread({}, currentSpecificity) : _object_spread_props(_object_spread({}, INITIAL_PROP_SPECIFICITY), _define_property({}, SPECIFICITY_1, priority));\n\n    if (state[(_pseudoPropsMap$prope = pseudoPropsMap[property]) === null || _pseudoPropsMap$prope === void 0 ? void 0 : _pseudoPropsMap$prope.respondTo] || [\"_dark\", \"_light\", \"_web\", \"_ios\", \"_android\"].includes(property)) {\n      if (shouldResolvePseudoProp({\n        property: property,\n        state: state,\n        platform: platform,\n        colormode: colormode\n      })) {\n        propertySpecity[pseudoPropsMap[property].priority]++;\n        simplifyProps({\n          props: props[property],\n          colormode: colormode,\n          platform: platform,\n          state: state,\n          currentSpecificity: propertySpecity,\n          previouslyFlattenProps: previouslyFlattenProps\n        }, flattenProps, specificityMap, priority);\n      }\n    } else if (state[(_pseudoPropsMap$prope2 = pseudoPropsMap[property]) === null || _pseudoPropsMap$prope2 === void 0 ? void 0 : _pseudoPropsMap$prope2.respondTo] === undefined) {\n      if (property.startsWith(\"_\")) {\n        if (compareSpecificity(specificityMap[property], propertySpecity, false)) {\n          specificityMap[property] = propertySpecity;\n          flattenProps[property] = merge({}, flattenProps[property], props[property]);\n        } else {\n          flattenProps[property] = merge({}, props[property], flattenProps[property]);\n        }\n      } else {\n        if (compareSpecificity(specificityMap[property], propertySpecity, false)) {\n          specificityMap[property] = propertySpecity;\n          flattenProps[property] = props[property];\n        }\n      }\n    }\n  }\n};\n\nexport var propsFlattener = function propsFlattener(param, priority) {\n  var props = param.props,\n      colormode = param.colormode,\n      platform = param.platform,\n      state = param.state,\n      currentSpecificityMap = param.currentSpecificityMap,\n      previouslyFlattenProps = param.previouslyFlattenProps;\n  var flattenProps = {};\n\n  for (var property in props) {\n    var _pseudoPropsMap$prope3;\n\n    if (state[(_pseudoPropsMap$prope3 = pseudoPropsMap[property]) === null || _pseudoPropsMap$prope3 === void 0 ? void 0 : _pseudoPropsMap$prope3.respondTo] === undefined && property.startsWith(\"_\")) {\n      flattenProps[property] = previouslyFlattenProps[property];\n    }\n  }\n\n  var specificityMap = currentSpecificityMap || {};\n  simplifyProps({\n    props: props,\n    colormode: colormode,\n    platform: platform,\n    state: state,\n    currentSpecificityMap: currentSpecificityMap,\n    previouslyFlattenProps: previouslyFlattenProps\n  }, flattenProps, specificityMap, priority);\n  return [flattenProps, specificityMap];\n};\n;\n;\n\n(function () {\n  var _a, _b;\n\n  if (typeof self !== 'undefined' && '$RefreshHelpers$' in self) {\n    var currentExports = __webpack_module__.exports;\n    var prevExports = (_b = (_a = __webpack_module__.hot.data) === null || _a === void 0 ? void 0 : _a.prevExports) !== null && _b !== void 0 ? _b : null;\n    self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, __webpack_module__.id);\n\n    if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n      __webpack_module__.hot.dispose(function (data) {\n        data.prevExports = currentExports;\n      });\n\n      import.meta.webpackHot.accept();\n\n      if (prevExports !== null) {\n        if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevExports, currentExports)) {\n          __webpack_module__.hot.invalidate();\n        } else {\n          self.$RefreshHelpers$.scheduleUpdate();\n        }\n      }\n    } else {\n      var isNoLongerABoundary = prevExports !== null;\n\n      if (isNoLongerABoundary) {\n        __webpack_module__.hot.invalidate();\n      }\n    }\n  }\n})();","map":{"version":3,"sources":["D:\\codes\\Next\\pomodoro-dash\\node_modules\\native-base\\lib\\module\\hooks\\useThemeProps\\propsFlattenerTest.js"],"names":["merge","SPECIFICITY_100","SPECIFICITY_70","SPECIFICITY_60","SPECIFICITY_55","SPECIFICITY_50","SPECIFICITY_40","SPECIFICITY_30","SPECIFICITY_10","SPECIFICITY_1","specificityPrecedence","INITIAL_PROP_SPECIFICITY","pseudoPropsMap","_web","dependentOn","priority","_ios","_android","_light","_dark","_indeterminate","respondTo","_checked","_readOnly","_invalid","_focus","_focusVisible","_hover","_pressed","_disabled","compareSpecificity","exisiting","upcoming","ignorebaseTheme","condition","length","index","shouldResolvePseudoProp","property","state","platform","colormode","concat","simplifyProps","props","currentSpecificity","previouslyFlattenProps","flattenProps","specificityMap","_pseudoPropsMap$prope","_pseudoPropsMap$prope2","propertySpecity","includes","undefined","startsWith","propsFlattener","currentSpecificityMap","_pseudoPropsMap$prope3"],"mappings":"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","sourcesContent":["import merge from 'lodash.merge';\nconst SPECIFICITY_100 = 100;\nconst SPECIFICITY_70 = 70;\nconst SPECIFICITY_60 = 60;\nconst SPECIFICITY_55 = 55;\nconst SPECIFICITY_50 = 50;\nconst SPECIFICITY_40 = 40;\nconst SPECIFICITY_30 = 30;\nconst SPECIFICITY_10 = 10;\nconst SPECIFICITY_1 = 1;\nconst specificityPrecedence = [SPECIFICITY_100, SPECIFICITY_70, SPECIFICITY_60, SPECIFICITY_55, SPECIFICITY_50, SPECIFICITY_40, SPECIFICITY_30, SPECIFICITY_10, SPECIFICITY_1];\nconst INITIAL_PROP_SPECIFICITY = {\n  [SPECIFICITY_100]: 0,\n  [SPECIFICITY_70]: 0,\n  [SPECIFICITY_60]: 0,\n  [SPECIFICITY_50]: 0,\n  [SPECIFICITY_55]: 0,\n  [SPECIFICITY_40]: 0,\n  [SPECIFICITY_30]: 0,\n  [SPECIFICITY_10]: 0,\n  [SPECIFICITY_1]: 0\n};\nconst pseudoPropsMap = {\n  _web: {\n    dependentOn: 'platform',\n    priority: SPECIFICITY_10\n  },\n  _ios: {\n    dependentOn: 'platform',\n    priority: SPECIFICITY_10\n  },\n  _android: {\n    dependentOn: 'platform',\n    priority: SPECIFICITY_10\n  },\n  _light: {\n    dependentOn: 'colormode',\n    priority: SPECIFICITY_10\n  },\n  _dark: {\n    dependentOn: 'colormode',\n    priority: SPECIFICITY_10\n  },\n  // TODO: have to add more interactionProps and stateProps\n  _indeterminate: {\n    dependentOn: 'state',\n    respondTo: 'isIndeterminate',\n    priority: SPECIFICITY_30\n  },\n  _checked: {\n    dependentOn: 'state',\n    respondTo: 'isChecked',\n    priority: SPECIFICITY_30\n  },\n  // Add new pseudeo props in between -------\n  _readOnly: {\n    dependentOn: 'state',\n    respondTo: 'isReadOnly',\n    priority: SPECIFICITY_30\n  },\n  // Add new pseudeo props in between -------\n  _invalid: {\n    dependentOn: 'state',\n    respondTo: 'isInvalid',\n    priority: SPECIFICITY_40\n  },\n  _focus: {\n    dependentOn: 'state',\n    respondTo: 'isFocused',\n    priority: SPECIFICITY_50\n  },\n  _focusVisible: {\n    dependentOn: 'state',\n    respondTo: 'isFocusVisible',\n    priority: SPECIFICITY_55\n  },\n  _hover: {\n    dependentOn: 'state',\n    respondTo: 'isHovered',\n    priority: SPECIFICITY_60\n  },\n  _pressed: {\n    dependentOn: 'state',\n    respondTo: 'isPressed',\n    priority: SPECIFICITY_70\n  },\n  _disabled: {\n    dependentOn: 'state',\n    respondTo: 'isDisabled',\n    priority: SPECIFICITY_100\n  }\n};\nexport const compareSpecificity = (exisiting, upcoming, ignorebaseTheme) => // property?: any\n{\n  if (!exisiting) return true;\n  if (!upcoming) return false;\n  const condition = ignorebaseTheme ? specificityPrecedence.length - 1 : specificityPrecedence.length;\n\n  for (let index = 0; index < condition; index++) {\n    if (exisiting[specificityPrecedence[index]] > upcoming[specificityPrecedence[index]]) {\n      return false;\n    } else if (exisiting[specificityPrecedence[index]] < upcoming[specificityPrecedence[index]]) {\n      return true;\n    }\n  }\n\n  return true;\n};\n\nconst shouldResolvePseudoProp = ({\n  property,\n  state,\n  platform,\n  colormode\n}) => {\n  if (pseudoPropsMap[property].dependentOn === 'platform') {\n    return property === \"_\".concat(platform);\n  } else if (pseudoPropsMap[property].dependentOn === 'colormode') {\n    return property === \"_\".concat(colormode);\n  } else if (pseudoPropsMap[property].dependentOn === 'state') {\n    return state[pseudoPropsMap[property].respondTo];\n  } else {\n    return false;\n  }\n};\n\nconst simplifyProps = ({\n  props,\n  colormode,\n  platform,\n  state,\n  currentSpecificity,\n  previouslyFlattenProps\n}, flattenProps = {}, specificityMap = {}, priority) => {\n  for (const property in props) {\n    var _pseudoPropsMap$prope, _pseudoPropsMap$prope2;\n\n    // NOTE: the order is important here. Keep in mind while specificity breakpoints.\n    const propertySpecity = currentSpecificity ? { ...currentSpecificity\n    } : { ...INITIAL_PROP_SPECIFICITY,\n      [SPECIFICITY_1]: priority\n    };\n\n    if (state[(_pseudoPropsMap$prope = pseudoPropsMap[property]) === null || _pseudoPropsMap$prope === void 0 ? void 0 : _pseudoPropsMap$prope.respondTo] || ['_dark', '_light', '_web', '_ios', '_android'].includes(property)) {\n      if (shouldResolvePseudoProp({\n        property,\n        state,\n        platform,\n        colormode\n      })) {\n        propertySpecity[pseudoPropsMap[property].priority]++;\n        simplifyProps({\n          props: props[property],\n          colormode,\n          platform,\n          state,\n          currentSpecificity: propertySpecity,\n          previouslyFlattenProps: previouslyFlattenProps\n        }, flattenProps, specificityMap, priority);\n      }\n    } else if (state[(_pseudoPropsMap$prope2 = pseudoPropsMap[property]) === null || _pseudoPropsMap$prope2 === void 0 ? void 0 : _pseudoPropsMap$prope2.respondTo] === undefined) {\n      if (property.startsWith('_')) {\n        if (compareSpecificity(specificityMap[property], propertySpecity, false)) {\n          specificityMap[property] = propertySpecity; // merging internal props (like, _text, _checked, ...)\n\n          flattenProps[property] = merge({}, flattenProps[property], props[property]);\n        } else {\n          flattenProps[property] = merge({}, props[property], flattenProps[property]);\n        }\n      } else {\n        if (compareSpecificity(specificityMap[property], propertySpecity, false)) {\n          specificityMap[property] = propertySpecity; // replacing simple props (like, p, m, bg, color, ...)\n\n          flattenProps[property] = props[property];\n        }\n      }\n    }\n  }\n};\n\nexport const propsFlattener = ({\n  props,\n  colormode,\n  platform,\n  state,\n  currentSpecificityMap,\n  previouslyFlattenProps\n}, priority) => {\n  const flattenProps = {};\n\n  for (const property in props) {\n    var _pseudoPropsMap$prope3;\n\n    if (state[(_pseudoPropsMap$prope3 = pseudoPropsMap[property]) === null || _pseudoPropsMap$prope3 === void 0 ? void 0 : _pseudoPropsMap$prope3.respondTo] === undefined && property.startsWith('_')) {\n      flattenProps[property] = previouslyFlattenProps[property];\n    }\n  }\n\n  const specificityMap = currentSpecificityMap || {}; // STEP 1.a (if): Check weather it should be recursively resolved\n  // NOTE: (when true) recursively resolved it\n  // STEP 1.b (else if): Check specificty\n  // STEP 1.b.i: Check for pseudo props\n  // NOTE: (when true) Merge it.\n  // NOTE: (when false) Replace it.\n\n  simplifyProps({\n    props,\n    colormode,\n    platform,\n    state,\n    currentSpecificityMap,\n    previouslyFlattenProps\n  }, flattenProps, specificityMap, priority);\n  return [flattenProps, specificityMap];\n};\n//# sourceMappingURL=propsFlattenerTest.js.map"]},"metadata":{},"sourceType":"module"}