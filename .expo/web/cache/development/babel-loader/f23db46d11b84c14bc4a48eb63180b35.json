{"ast":null,"code":"\"use strict\";\n\nvar _toConsumableArray = require(\"@babel/runtime/helpers/toConsumableArray\");\n\nvar _defineProperty = require(\"@babel/runtime/helpers/defineProperty\");\n\nvar _slicedToArray = require(\"@babel/runtime/helpers/slicedToArray\");\n\nvar _objectWithoutProperties = require(\"@babel/runtime/helpers/objectWithoutProperties\");\n\nvar _excluded = [\"onSelectedItemChange\", \"options\", \"renderItem\", \"getOptionLabel\", \"getOptionKey\", \"onChange\", \"numberOfItems\"];\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Typeahead = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _button = require(\"@react-native-aria/button\");\n\nvar _combobox = require(\"@react-stately/combobox\");\n\nvar _combobox2 = require(\"@react-native-aria/combobox\");\n\nvar _listbox = require(\"@react-native-aria/listbox\");\n\nvar _reactNative = require(\"react-native-web/dist/index\");\n\nvar _collections = require(\"@react-stately/collections\");\n\nvar _Box = _interopRequireDefault(require(\"../../primitives/Box\"));\n\nvar _Pressable = require(\"../../primitives/Pressable\");\n\nvar _Text = _interopRequireDefault(require(\"../../primitives/Text\"));\n\nvar _tools = require(\"../../../theme/tools\");\n\nvar _types = require(\"./types\");\n\nvar _Input = require(\"../../primitives/Input\");\n\nvar _hooks = require(\"../../../hooks\");\n\nvar _useHasResponsiveProps = require(\"../../../hooks/useHasResponsiveProps\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nvar Typeahead = _react.default.forwardRef(function (_ref, ref) {\n  var onSelectedItemChange = _ref.onSelectedItemChange,\n      options = _ref.options,\n      renderItem = _ref.renderItem,\n      getOptionLabel = _ref.getOptionLabel,\n      getOptionKey = _ref.getOptionKey,\n      onChange = _ref.onChange,\n      numberOfItems = _ref.numberOfItems,\n      rest = _objectWithoutProperties(_ref, _excluded);\n\n  if ((0, _useHasResponsiveProps.useHasResponsiveProps)(rest)) {\n    return null;\n  }\n\n  return _react.default.createElement(ComboBoxImplementation, _extends({}, rest, {\n    onSelectionChange: onSelectedItemChange,\n    items: numberOfItems !== undefined ? options.slice(0, numberOfItems) : options,\n    onInputChange: onChange,\n    ref: ref\n  }), function (item) {\n    if (typeof item !== \"string\" && getOptionLabel === undefined) {\n      throw new Error(\"Please use getOptionLabel prop\");\n    }\n\n    if (item.id === undefined && getOptionKey === undefined) {\n      throw new Error(\"Please use getOptionKey prop\");\n    }\n\n    var optionLabel = getOptionLabel ? getOptionLabel(item) : item;\n    var optionKey = getOptionKey ? getOptionKey(item) : item.id !== undefined ? item.id : optionLabel;\n    return _react.default.createElement(_collections.Item, {\n      textValue: optionLabel,\n      key: optionKey\n    }, renderItem ? renderItem(item) : _react.default.createElement(_Box.default, {\n      p: 2,\n      justifyContent: \"center\"\n    }, _react.default.createElement(_Text.default, null, optionLabel)));\n  });\n});\n\nexports.Typeahead = Typeahead;\n\nvar ComboBoxImplementation = _react.default.forwardRef(function (props, ref) {\n  var _ref2 = (0, _tools.extractInObject)(props, _types.layoutPropsList),\n      _ref3 = _slicedToArray(_ref2, 1),\n      layoutProps = _ref3[0];\n\n  var state = (0, _combobox.useComboBoxState)(props);\n\n  var triggerRef = _react.default.useRef(null);\n\n  var inputRef = _react.default.useRef(null);\n\n  var listBoxRef = _react.default.useRef(null);\n\n  var popoverRef = _react.default.useRef(null);\n\n  var _ref4 = (0, _combobox2.useComboBox)(_objectSpread(_objectSpread({}, props), {}, {\n    inputRef: inputRef,\n    buttonRef: triggerRef,\n    listBoxRef: listBoxRef,\n    popoverRef: popoverRef,\n    menuTrigger: \"input\"\n  }), state),\n      triggerProps = _ref4.buttonProps,\n      inputProps = _ref4.inputProps,\n      listBoxProps = _ref4.listBoxProps,\n      labelProps = _ref4.labelProps;\n\n  var toggleIconSetter = function toggleIconSetter() {\n    if (typeof props.toggleIcon === \"function\") return props.toggleIcon({\n      isOpen: state.isOpen\n    });\n    return props.toggleIcon;\n  };\n\n  var _ref5 = (0, _button.useButton)(triggerProps),\n      buttonProps = _ref5.buttonProps;\n\n  return _react.default.createElement(_Box.default, _extends({\n    flexDirection: \"row\"\n  }, layoutProps, {\n    ref: ref\n  }), _react.default.createElement(_Box.default, {\n    flex: 1\n  }, props.label && _react.default.createElement(_Text.default, _extends({}, labelProps, {\n    pb: 1\n  }), props.label), _react.default.createElement(_Input.Input, _extends({}, inputProps, {\n    ref: inputRef,\n    InputRightElement: _react.default.createElement(_Pressable.Pressable, _extends({}, buttonProps, {\n      ref: triggerRef\n    }), toggleIconSetter())\n  })), state.isOpen && _react.default.createElement(ListBoxPopup, _extends({}, listBoxProps, {\n    listBoxRef: listBoxRef,\n    popoverRef: popoverRef,\n    state: state,\n    label: props.label\n  }))));\n});\n\nfunction ListBoxPopup(props) {\n  var popoverRef = props.popoverRef,\n      listBoxRef = props.listBoxRef,\n      state = props.state,\n      dropdownHeight = props.dropdownHeight,\n      label = props.label;\n\n  var _ref6 = (0, _listbox.useListBox)({\n    label: label,\n    autoFocus: state.focusStrategy,\n    disallowEmptySelection: true\n  }, state, listBoxRef),\n      listBoxProps = _ref6.listBoxProps;\n\n  return _react.default.createElement(_Box.default, {\n    ref: popoverRef\n  }, _react.default.createElement(_Box.default, {\n    position: \"absolute\",\n    width: \"100%\",\n    maxHeight: dropdownHeight !== null && dropdownHeight !== void 0 ? dropdownHeight : 200\n  }, _react.default.createElement(_reactNative.ScrollView, _extends({}, listBoxProps, {\n    keyboardShouldPersistTaps: \"handled\",\n    ref: function ref(node) {\n      if (_reactNative.Platform.OS === \"web\") {\n        listBoxRef.current = (0, _reactNative.findNodeHandle)(node);\n      } else {\n        listBoxRef.current = node;\n      }\n    }\n  }), _toConsumableArray(state.collection).map(function (item) {\n    return _react.default.createElement(Option, {\n      key: item.key,\n      item: item,\n      state: state\n    });\n  }))));\n}\n\nfunction Option(_ref7) {\n  var item = _ref7.item,\n      state = _ref7.state;\n  var searchItemStyle = (0, _hooks.useThemeProps)(\"TypeAheadSearchItem\", {});\n\n  var ref = _react.default.useRef(null);\n\n  var isDisabled = state.disabledKeys.has(item.key);\n  var isSelected = state.selectionManager.isSelected(item.key);\n  var isFocused = state.selectionManager.focusedKey === item.key;\n\n  var _ref8 = (0, _listbox.useOption)({\n    key: item.key,\n    isDisabled: isDisabled,\n    isSelected: isSelected,\n    shouldFocusOnHover: true,\n    shouldUseVirtualFocus: true\n  }, state, ref),\n      optionProps = _ref8.optionProps;\n\n  var backgroundColor = searchItemStyle.backgroundColor;\n  var opacity = 1;\n\n  if (isSelected) {\n    backgroundColor = searchItemStyle._focus.backgroundColor;\n  } else if (isFocused) {\n    backgroundColor = searchItemStyle._focus.backgroundColor;\n  } else if (isDisabled) {\n    opacity = 0.6;\n    backgroundColor = searchItemStyle._disabled.backgroundColor;\n  }\n\n  return _react.default.createElement(_Pressable.Pressable, _extends({}, optionProps, {\n    opacity: opacity,\n    cursor: isDisabled ? _reactNative.Platform.OS === \"web\" ? \"not-allowed\" : null : null,\n    backgroundColor: backgroundColor,\n    ref: ref\n  }), item.rendered);\n}","map":{"version":3,"sources":["D:\\codes\\Next\\pomodoro-dash\\node_modules\\native-base\\lib\\commonjs\\components\\composites\\Typeahead\\Typeahead.js"],"names":["Object","defineProperty","exports","value","Typeahead","_react","_interopRequireDefault","require","_button","_combobox","_combobox2","_listbox","_collections","_Box","_Pressable","_Text","_tools","_types","_Input","_hooks","_useHasResponsiveProps","obj","__esModule","default","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","forwardRef","onSelectedItemChange","options","renderItem","getOptionLabel","getOptionKey","onChange","numberOfItems","rest","ref","useHasResponsiveProps","createElement","ComboBoxImplementation","onSelectionChange","items","undefined","slice","onInputChange","item","Error","id","optionLabel","optionKey","Item","textValue","p","justifyContent","props","layoutProps","extractInObject","layoutPropsList","state","useComboBoxState","triggerRef","useRef","inputRef","listBoxRef","popoverRef","buttonProps","triggerProps","inputProps","listBoxProps","labelProps","useComboBox","buttonRef","menuTrigger","toggleIconSetter","toggleIcon","isOpen","useButton","flexDirection","flex","label","pb","Input","InputRightElement","Pressable","ListBoxPopup","dropdownHeight","useListBox","autoFocus","focusStrategy","disallowEmptySelection","position","width","maxHeight","_reactNative","ScrollView","keyboardShouldPersistTaps","node","Platform","OS","current","findNodeHandle","collection","map","Option","searchItemStyle","useThemeProps","isDisabled","disabledKeys","has","isSelected","selectionManager","isFocused","focusedKey","optionProps","useOption","shouldFocusOnHover","shouldUseVirtualFocus","backgroundColor","opacity","_focus","_disabled","cursor","rendered"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Typeahead = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _button = require(\"@react-native-aria/button\");\n\nvar _combobox = require(\"@react-stately/combobox\");\n\nvar _combobox2 = require(\"@react-native-aria/combobox\");\n\nvar _listbox = require(\"@react-native-aria/listbox\");\n\nvar _reactNative = require(\"react-native\");\n\nvar _collections = require(\"@react-stately/collections\");\n\nvar _Box = _interopRequireDefault(require(\"../../primitives/Box\"));\n\nvar _Pressable = require(\"../../primitives/Pressable\");\n\nvar _Text = _interopRequireDefault(require(\"../../primitives/Text\"));\n\nvar _tools = require(\"../../../theme/tools\");\n\nvar _types = require(\"./types\");\n\nvar _Input = require(\"../../primitives/Input\");\n\nvar _hooks = require(\"../../../hooks\");\n\nvar _useHasResponsiveProps = require(\"../../../hooks/useHasResponsiveProps\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nconst Typeahead = /*#__PURE__*/_react.default.forwardRef(({\n  onSelectedItemChange,\n  options,\n  renderItem,\n  getOptionLabel,\n  getOptionKey,\n  onChange,\n  numberOfItems,\n  ...rest\n}, ref) => {\n  //TODO: refactor for responsive prop\n  if ((0, _useHasResponsiveProps.useHasResponsiveProps)(rest)) {\n    return null;\n  }\n\n  return /*#__PURE__*/_react.default.createElement(ComboBoxImplementation, _extends({}, rest, {\n    onSelectionChange: onSelectedItemChange,\n    items: numberOfItems !== undefined ? options.slice(0, numberOfItems) : options,\n    onInputChange: onChange,\n    ref: ref\n  }), item => {\n    if (typeof item !== 'string' && getOptionLabel === undefined) {\n      throw new Error('Please use getOptionLabel prop');\n    }\n\n    if (item.id === undefined && getOptionKey === undefined) {\n      throw new Error('Please use getOptionKey prop');\n    }\n\n    const optionLabel = getOptionLabel ? getOptionLabel(item) : item;\n    const optionKey = getOptionKey ? getOptionKey(item) : item.id !== undefined ? item.id : optionLabel;\n    return /*#__PURE__*/_react.default.createElement(_collections.Item, {\n      textValue: optionLabel,\n      key: optionKey\n    }, renderItem ? renderItem(item) : /*#__PURE__*/_react.default.createElement(_Box.default, {\n      p: 2,\n      justifyContent: \"center\"\n    }, /*#__PURE__*/_react.default.createElement(_Text.default, null, optionLabel)));\n  });\n});\n\nexports.Typeahead = Typeahead;\n\nconst ComboBoxImplementation = /*#__PURE__*/_react.default.forwardRef((props, ref) => {\n  const [layoutProps] = (0, _tools.extractInObject)(props, _types.layoutPropsList);\n  let state = (0, _combobox.useComboBoxState)(props);\n\n  let triggerRef = _react.default.useRef(null);\n\n  let inputRef = _react.default.useRef(null);\n\n  let listBoxRef = _react.default.useRef(null);\n\n  let popoverRef = _react.default.useRef(null);\n\n  let {\n    buttonProps: triggerProps,\n    inputProps,\n    listBoxProps,\n    labelProps\n  } = (0, _combobox2.useComboBox)({ ...props,\n    inputRef,\n    buttonRef: triggerRef,\n    listBoxRef,\n    popoverRef,\n    menuTrigger: 'input'\n  }, state);\n\n  const toggleIconSetter = () => {\n    if (typeof props.toggleIcon === 'function') return props.toggleIcon({\n      isOpen: state.isOpen\n    });\n    return props.toggleIcon;\n  };\n\n  let {\n    buttonProps\n  } = (0, _button.useButton)(triggerProps);\n  return /*#__PURE__*/_react.default.createElement(_Box.default, _extends({\n    flexDirection: \"row\"\n  }, layoutProps, {\n    ref: ref\n  }), /*#__PURE__*/_react.default.createElement(_Box.default, {\n    flex: 1\n  }, props.label && /*#__PURE__*/_react.default.createElement(_Text.default, _extends({}, labelProps, {\n    pb: 1\n  }), props.label), /*#__PURE__*/_react.default.createElement(_Input.Input, _extends({}, inputProps, {\n    ref: inputRef,\n    InputRightElement:\n    /*#__PURE__*/\n    // @ts-ignore - RN has hitSlop type inconsistent for View and Pressable!\n    _react.default.createElement(_Pressable.Pressable, _extends({}, buttonProps, {\n      ref: triggerRef\n    }), toggleIconSetter())\n  })), state.isOpen && /*#__PURE__*/_react.default.createElement(ListBoxPopup, _extends({}, listBoxProps, {\n    listBoxRef: listBoxRef,\n    popoverRef: popoverRef,\n    state: state,\n    label: props.label\n  }))));\n});\n\nfunction ListBoxPopup(props) {\n  let {\n    popoverRef,\n    listBoxRef,\n    state,\n    dropdownHeight,\n    label\n  } = props;\n  let {\n    listBoxProps\n  } = (0, _listbox.useListBox)({\n    label,\n    autoFocus: state.focusStrategy,\n    disallowEmptySelection: true\n  }, state, listBoxRef);\n  return /*#__PURE__*/_react.default.createElement(_Box.default, {\n    ref: popoverRef\n  }, /*#__PURE__*/_react.default.createElement(_Box.default, {\n    position: \"absolute\",\n    width: \"100%\",\n    maxHeight: dropdownHeight !== null && dropdownHeight !== void 0 ? dropdownHeight : 200\n  }, /*#__PURE__*/_react.default.createElement(_reactNative.ScrollView, _extends({}, listBoxProps, {\n    keyboardShouldPersistTaps: \"handled\",\n    ref: node => {\n      if (_reactNative.Platform.OS === 'web') {\n        listBoxRef.current = (0, _reactNative.findNodeHandle)(node);\n      } else {\n        listBoxRef.current = node;\n      }\n    }\n  }), [...state.collection].map(item => /*#__PURE__*/_react.default.createElement(Option, {\n    key: item.key,\n    item: item,\n    state: state\n  })))));\n}\n\nfunction Option({\n  item,\n  state\n}) {\n  const searchItemStyle = (0, _hooks.useThemeProps)('TypeAheadSearchItem', {});\n\n  let ref = _react.default.useRef(null);\n\n  let isDisabled = state.disabledKeys.has(item.key);\n  let isSelected = state.selectionManager.isSelected(item.key);\n  let isFocused = state.selectionManager.focusedKey === item.key;\n  let {\n    optionProps\n  } = (0, _listbox.useOption)({\n    key: item.key,\n    isDisabled,\n    isSelected,\n    shouldFocusOnHover: true,\n    shouldUseVirtualFocus: true\n  }, state, ref);\n  let backgroundColor = searchItemStyle.backgroundColor;\n  let opacity = 1;\n\n  if (isSelected) {\n    backgroundColor = searchItemStyle._focus.backgroundColor;\n  } else if (isFocused) {\n    backgroundColor = searchItemStyle._focus.backgroundColor;\n  } else if (isDisabled) {\n    opacity = 0.6;\n    backgroundColor = searchItemStyle._disabled.backgroundColor;\n  }\n\n  return /*#__PURE__*/_react.default.createElement(_Pressable.Pressable, _extends({}, optionProps, {\n    opacity: opacity,\n    cursor: isDisabled ? _reactNative.Platform.OS === 'web' ? 'not-allowed' : null : null,\n    backgroundColor: backgroundColor,\n    ref: ref\n  }), item.rendered);\n}\n//# sourceMappingURL=Typeahead.js.map"]},"metadata":{},"sourceType":"script"}